<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Go Todo å¾…åŠç®¡ç†</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <!-- ç™»å½•/æ³¨å†Œæ¨¡æ€æ¡† -->
    <div id="authModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">ç™»å½•</h2>
                <button class="close-btn" onclick="closeAuthModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="authForm">
                    <div id="registerFields" style="display: none;">
                        <input type="email" id="regEmail" placeholder="é‚®ç®±åœ°å€" required>
                    </div>
                    <input type="text" id="authUsername" placeholder="ç”¨æˆ·å" required>
                    <input type="password" id="authPassword" placeholder="å¯†ç " required>
                    <button type="submit" id="authSubmit">ç™»å½•</button>
                </form>
                <div class="auth-switch">
                    <span id="switchText">è¿˜æ²¡æœ‰è´¦å·ï¼Ÿ</span>
                    <a href="#" id="switchLink" onclick="switchAuthMode()">ç«‹å³æ³¨å†Œ</a>
                </div>
            </div>
        </div>
    </div>

    <!-- ä¸»åº”ç”¨ç•Œé¢ -->
    <div class="container" id="appContainer" style="display: none;">
        <header>
            <h1>ğŸ“ Go Todo å¾…åŠç®¡ç†</h1>
            <p>åŸºäº Go + Gin + openGauss çš„å¾…åŠäº‹é¡¹ç®¡ç†ç³»ç»Ÿ</p>
            <div class="user-info">
                <span class="badge">æ¬¢è¿, <strong id="currentUsername">ç”¨æˆ·</strong></span>
                <button id="logoutBtn" class="logout-btn">é€€å‡ºç™»å½•</button>
            </div>
        </header>

        <div class="todo-form">
            <input type="text" id="todoTitle" placeholder="è¾“å…¥å¾…åŠäº‹é¡¹æ ‡é¢˜..." maxlength="200">
            <textarea id="todoDesc" placeholder="æè¿°ï¼ˆå¯é€‰ï¼‰..." rows="2"></textarea>
            <select id="todoPriority">
                <option value="0">ä½ä¼˜å…ˆçº§</option>
                <option value="1" selected>ä¸­ä¼˜å…ˆçº§</option>
                <option value="2">é«˜ä¼˜å…ˆçº§</option>
            </select>
            <button id="addTodo">æ·»åŠ å¾…åŠ</button>
        </div>

        <div class="filters">
            <button class="filter-btn active" data-filter="all">å…¨éƒ¨</button>
            <button class="filter-btn" data-filter="active">æœªå®Œæˆ</button>
            <button class="filter-btn" data-filter="completed">å·²å®Œæˆ</button>
            <button class="filter-btn" data-filter="high">é«˜ä¼˜å…ˆçº§</button>
            <button id="clearCompleted">æ¸…é™¤å·²å®Œæˆ</button>
        </div>

        <div class="stats">
            <span>æ€»è®¡: <strong id="totalCount">0</strong></span>
            <span>æœªå®Œæˆ: <strong id="activeCount">0</strong></span>
            <span>å·²å®Œæˆ: <strong id="completedCount">0</strong></span>
        </div>

        <ul id="todoList" class="todo-list"></ul>

        <footer>
            <span>Powered by Go Â· Gin Â· openGauss Â· RISC-V</span>
            <span class="api-status" id="apiStatus">API è¿æ¥ä¸­...</span>
        </footer>
    </div>

    <script>
        window.__API_BASE__ = window.location.pathname.startsWith("/go-todo")
            ? "/go-todo/api/todos"
            : (window.__API_BASE__ || "/api/todos");
        window.__AUTH_BASE__ = window.location.pathname.startsWith("/go-todo")
            ? "/go-todo/api/auth"
            : "/api/auth";
    </script>
    <script src="./app.js"></script>
</body>
</html>

