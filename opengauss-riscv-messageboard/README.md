# openGauss RISC-V ç¤¾åŒºç•™è¨€æ¿

> **Slogan**: è½»é‡çº§ï¼Œé«˜æ€§èƒ½ï¼Œå¼€æºèŠ¯ ğŸš€

ä¸€ä¸ªåŸºäº openGauss 6.0.0-riscv64 çš„ç°ä»£åŒ–ç¤¾åŒºç•™è¨€æ¿ç³»ç»Ÿï¼Œæ”¯æŒç”¨æˆ·æ³¨å†Œã€ç•™è¨€å‘è¡¨ã€è¯„è®ºäº’åŠ¨ç­‰åŠŸèƒ½ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- ğŸ” **ç”¨æˆ·è®¤è¯**: JWTä»¤ç‰Œè®¤è¯ï¼Œæ”¯æŒæ³¨å†Œç™»å½•
- ğŸ’¬ **ç•™è¨€ç³»ç»Ÿ**: å‘è¡¨ç•™è¨€ï¼Œå®æ—¶æ˜¾ç¤º
- ğŸ’­ **è¯„è®ºåŠŸèƒ½**: å¯¹ç•™è¨€è¿›è¡Œè¯„è®ºäº’åŠ¨
- ğŸ“Š **æ•°æ®ç»Ÿè®¡**: å®æ—¶ç»Ÿè®¡ç•™è¨€å’Œç”¨æˆ·æ•°æ®
- ğŸ“± **å“åº”å¼è®¾è®¡**: æ”¯æŒæ¡Œé¢å’Œç§»åŠ¨ç«¯
- ğŸ”§ **APIæ–‡æ¡£**: è‡ªåŠ¨ç”Ÿæˆçš„APIæ–‡æ¡£

## ç•Œé¢æˆªå›¾

![img](../img/å¾®ä¿¡æˆªå›¾_20251024174152.png) 

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### åç«¯æŠ€æœ¯æ ˆ
- **æ¡†æ¶**: FastAPI (Python 3.11)
- **æ•°æ®åº“**: openGauss 6.0.0-riscv64
- **ORM**: SQLAlchemy
- **è®¤è¯**: JWT (JSON Web Tokens)
- **æ•°æ®åº“é©±åŠ¨**: psycopg2-binary

### å‰ç«¯æŠ€æœ¯æ ˆ
- **æ¡†æ¶**: Vue 3 + Composition API
- **æ„å»ºå·¥å…·**: Vite
- **HTTPå®¢æˆ·ç«¯**: Axios
- **UIç»„ä»¶**: åŸç”ŸCSS + å“åº”å¼è®¾è®¡

### éƒ¨ç½²æŠ€æœ¯æ ˆ
- **å®¹å™¨åŒ–**: Docker + Docker Compose
- **WebæœåŠ¡å™¨**: Nginx
- **å¤šæ¶æ„æ”¯æŒ**: qemu-user-static (x86_64è¿è¡ŒRISC-Vå®¹å™¨)

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æœ¬åœ°å¼€å‘

1. **å…‹éš†é¡¹ç›®**
```bash
git clone https://github.com/zhuwei290/plct
cd opengauss-riscv-messageboard
```

2. **å¯åŠ¨æœåŠ¡**
```bash
# ä¸€é”®å¯åŠ¨
./start.sh

# æˆ–æ‰‹åŠ¨å¯åŠ¨
docker-compose up -d --build
```

3. **è®¿é—®åº”ç”¨**
- ä¸»é¡µ: http://localhost
- APIæ–‡æ¡£: http://localhost/api/docs
- å¥åº·æ£€æŸ¥: http://localhost/health





## ğŸ”§ ç®¡ç†å‘½ä»¤

### æŸ¥çœ‹æœåŠ¡çŠ¶æ€
```bash
docker-compose ps
```

### æŸ¥çœ‹æ—¥å¿—
```bash
# æŸ¥çœ‹æ‰€æœ‰æœåŠ¡æ—¥å¿—
docker-compose logs

# æŸ¥çœ‹ç‰¹å®šæœåŠ¡æ—¥å¿—
docker-compose logs backend
docker-compose logs database
```

### é‡å¯æœåŠ¡
```bash
docker-compose restart
```

### åœæ­¢æœåŠ¡
```bash
docker-compose down
```

### æ¸…ç†æ•°æ®
```bash
docker-compose down -v
docker system prune -f
```

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. SASLè®¤è¯é”™è¯¯
```
connection to server at "database" (172.26.0.2), port 5432 failed: 
none of the server's SASL authentication mechanisms are supported
```

**è§£å†³æ–¹æ¡ˆ**: 
- ä¿®æ”¹å¯†ç åŠ å¯†ç±»å‹ä¸ºMD5
- é‡æ–°åˆ›å»ºæ•°æ®åº“ç”¨æˆ·
- åº”ç”¨æ•°æ®åº“æ¶æ„

#### 2. æ¶æ„ä¸å…¼å®¹é”™è¯¯
```
exec /bin/sh: exec format error
```

**è§£å†³æ–¹æ¡ˆ**: å®‰è£…qemu-user-staticæ”¯æŒ
```bash
docker run --rm --privileged multiarch/qemu-user-static --reset -p yes
```

#### 3. æ•°æ®åº“è¿æ¥å¤±è´¥
```bash
# æ£€æŸ¥æ•°æ®åº“çŠ¶æ€
docker exec messageboard-db gsql -d postgres -c "SELECT 1;"

# æŸ¥çœ‹æ•°æ®åº“æ—¥å¿—
docker logs messageboard-db
```

#### 4. APIæœåŠ¡å¼‚å¸¸
```bash
# æŸ¥çœ‹APIæ—¥å¿—
docker logs messageboard-api

# æ£€æŸ¥å¥åº·çŠ¶æ€
curl http://localhost/health
```

## ğŸ“Š é¡¹ç›®ç»“æ„

```
opengauss-riscv-messageboard/
â”œâ”€â”€ backend/                 # åç«¯APIæœåŠ¡
â”‚   â”œâ”€â”€ main.py             # FastAPIåº”ç”¨ä¸»æ–‡ä»¶
â”‚   â”œâ”€â”€ requirements.txt     # Pythonä¾èµ–
â”‚   â””â”€â”€ Dockerfile          # åç«¯å®¹å™¨é…ç½®
â”œâ”€â”€ frontend/               # å‰ç«¯Vueåº”ç”¨
â”‚   â”œâ”€â”€ src/                # æºä»£ç 
â”‚   â”œâ”€â”€ public/             # é™æ€èµ„æº
â”‚   â”œâ”€â”€ package.json        # ä¾èµ–é…ç½®
â”‚   â””â”€â”€ Dockerfile          # å‰ç«¯å®¹å™¨é…ç½®
â”œâ”€â”€ init-db/                # æ•°æ®åº“åˆå§‹åŒ–
â”‚   â”œâ”€â”€ schema.sql          # æ•°æ®åº“æ¶æ„
â”‚   â”œâ”€â”€ data.sql            # åˆå§‹æ•°æ®
â”‚   â”œâ”€â”€ init.sh             # åˆå§‹åŒ–è„šæœ¬
â”‚   â””â”€â”€ fix-auth.sh         # è®¤è¯ä¿®å¤è„šæœ¬
â”œâ”€â”€ docker-compose.yml      # Docker Composeé…ç½®
â”œâ”€â”€ start.sh                # æœ¬åœ°å¯åŠ¨è„šæœ¬
â”œâ”€â”€ deploy.sh               # æœåŠ¡å™¨éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ deploy-to-server.sh     # æœ¬åœ°åˆ°æœåŠ¡å™¨éƒ¨ç½²è„šæœ¬
â””â”€â”€ README.md               # é¡¹ç›®æ–‡æ¡£
```

## ğŸ”’ å®‰å…¨é…ç½®

### æ•°æ®åº“å®‰å…¨
- å¯†ç åŠ å¯†ï¼šMD5ï¼ˆå…¼å®¹æ€§æœ€å¥½ï¼‰
- ç”¨æˆ·æƒé™ï¼šæœ€å°æƒé™åŸåˆ™
- è¿æ¥å®‰å…¨ï¼šå†…ç½‘é€šä¿¡

### åº”ç”¨å®‰å…¨
- JWTä»¤ç‰Œè®¤è¯
- CORSè·¨åŸŸé…ç½®
- è¾“å…¥éªŒè¯å’Œè¿‡æ»¤
- SQLæ³¨å…¥é˜²æŠ¤

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### æ•°æ®åº“ä¼˜åŒ–
- è¿æ¥æ± é…ç½®ï¼š10ä¸ªè¿æ¥ï¼Œæœ€å¤§20ä¸ªæº¢å‡º
- ç´¢å¼•ä¼˜åŒ–ï¼šå…³é”®å­—æ®µå»ºç«‹ç´¢å¼•
- æŸ¥è¯¢ä¼˜åŒ–ï¼šä½¿ç”¨é¢„ç¼–è¯‘è¯­å¥

### åº”ç”¨ä¼˜åŒ–
- é™æ€èµ„æºç¼“å­˜
- APIå“åº”å‹ç¼©
- å¥åº·æ£€æŸ¥æœºåˆ¶
- é”™è¯¯å¤„ç†å’Œé‡è¯•

## ğŸŒŸ é¡¹ç›®ç‰¹è‰²

### æŠ€æœ¯äº®ç‚¹
- ğŸš€ **è½»é‡çº§**: æœ€å°åŒ–èµ„æºå ç”¨
- âš¡ **é«˜æ€§èƒ½**: ä¼˜åŒ–çš„æ•°æ®åº“æŸ¥è¯¢
- ğŸ”§ **æ˜“éƒ¨ç½²**: ä¸€é”®éƒ¨ç½²è„šæœ¬
- ğŸ›¡ï¸ **å®‰å…¨**: å¤šå±‚å®‰å…¨é˜²æŠ¤
- ğŸ“± **ç°ä»£**: å“åº”å¼ç”¨æˆ·ç•Œé¢

### åˆ›æ–°ç‚¹
- é¦–ä¸ªåŸºäºopenGauss RISC-Vçš„ç•™è¨€æ¿ç³»ç»Ÿ
- æ”¯æŒx86_64æœåŠ¡å™¨è¿è¡ŒRISC-Vå®¹å™¨
- è‡ªåŠ¨ä¿®å¤SASLè®¤è¯é—®é¢˜
- å®Œæ•´çš„ç”¨æˆ·è®¤è¯å’Œè¯„è®ºç³»ç»Ÿ

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### é—®é¢˜åé¦ˆ
- æŸ¥çœ‹æ—¥å¿—: `docker-compose logs`
- æ£€æŸ¥çŠ¶æ€: `docker-compose ps`
- é‡å¯æœåŠ¡: `docker-compose restart`

### å¼€å‘ç¯å¢ƒ
- Python 3.11+
- Node.js 18+
- Docker 20.10+
- Docker Compose 2.0+

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ï¼Œè¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

---

**openGauss RISC-V ç¤¾åŒºç•™è¨€æ¿** - è½»é‡çº§ï¼Œé«˜æ€§èƒ½ï¼Œå¼€æºèŠ¯ ğŸš€

## ğŸ¯ å¿«é€Ÿå¼€å§‹

```bash
# æœ¬åœ°æµ‹è¯•
./start.sh



